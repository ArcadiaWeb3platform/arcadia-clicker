<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Arcadia AI Clicker</title>
  <!-- –ú–ï–¢–ê–¢–ï–ì–ò –î–õ–Ø –ê–î–ê–ü–¢–ê–¶–ò–ò –ü–û–î –ú–û–ë–ò–õ–¨–ù–´–ï –£–°–¢–†–û–ô–°–¢–í–ê -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <!-- –®–†–ò–§–¢ PIXEL -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    /* –ß—Ç–æ–±—ã iOS –Ω–µ –∏–∑–º–µ–Ω—è–ª —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ */
    html {
      -webkit-text-size-adjust: none;
    }

    /* –°–±—Ä–æ—Å –æ—Ç—Å—Ç—É–ø–æ–≤ –∏ —Å–∫—Ä–æ–ª–ª–∞ */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
      font-family: 'Press Start 2P', cursive;
      background: url('https://i.gifer.com/fzUl.gif') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      box-sizing: border-box;
    }

    /* –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò */
    #loading-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 99999; /* –≤—Å–µ–≥–¥–∞ –≤—ã—à–µ –≤—Å–µ–≥–æ */
      transition: opacity 0.5s ease, visibility 0.5s ease;
      visibility: visible;
      opacity: 1;
    }
    /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ */
    #loading-screen.hidden {
      visibility: hidden;
      opacity: 0;
    }
    /* –ê–Ω–∏–º–∞—Ü–∏—è –±–µ–≥—É—â–∏—Ö —Ç–æ—á–µ–∫ "Loading..." */
    @keyframes loadingDots {
      0%   { content: "Loading"; }
      25%  { content: "Loading."; }
      50%  { content: "Loading.."; }
      75%  { content: "Loading..."; }
      100% { content: "Loading"; }
    }
    .loading-text::after {
      font-family: 'Press Start 2P', cursive;
      content: "Loading";
      animation: loadingDots 2s infinite;
      white-space: pre;
      display: inline-block;
      margin-left: 5px;
    }
    /* –ù–∏–∫–Ω–µ–π–º —Å–ª–µ–≤–∞ –ø–æ–¥ —Å—Ç—Ä–æ–∫–æ–π ¬´Loading...¬ª */
    #telegram-username {
      margin-top: 20px;
      font-size: 14px;
      color: #ffec99;
    }

    /* –§–æ–Ω, –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–º–µ–Ω—ã */
    #background-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1s ease;
      z-index: -1;
    }

    /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
    #progress-container {
      position: absolute;
      top: 10px; 
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    .progress-bar {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      height: 40px; 
      width: 100%;
      background: #444;
    }
    .progress {
      position: absolute;
      height: 100%;
      width: 0%;
      transition: width 0.5s, background-color 0.5s ease;
    }
    .progress-text {
      position: absolute;
      z-index: 2;
      top: 0; left: 0; right: 0;
      color: white; 
      font-size: 12px; /* –±—ã–ª–æ 16px */
      pointer-events: none;
      display: flex; 
      justify-content: center; 
      align-items: center;
      height: 100%;
    }

    /* –ö–∞–Ω–≤–∞—Å –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ */
    canvas {
      display: block;
      position: absolute;
      top: 0; 
      left: 0;
      z-index: 1;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö +x –º–æ–Ω–µ—Ç */
    .plus-text {
      position: absolute;
      color: #ffff99;
      font-size: 20px; /* –±—ã–ª–æ 30px */
      font-family: 'Press Start 2P', cursive;
      animation: float 1.5s ease-out forwards;
      pointer-events: none;
      z-index: 15;
    }
    @keyframes float {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-100px); }
    }

    /* –§—É—Ç–µ—Ä —Å –∏–∫–æ–Ω–∫–∞–º–∏ */
    #footer {
      position: fixed; /* —á—Ç–æ–±—ã –∏–∫–æ–Ω–∫–∏ –±—ã–ª–∏ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã */
      bottom: 20px;
      display: flex; 
      justify-content: center; 
      align-items: center;
      gap: 30px;
      width: 100%;
      box-sizing: border-box;
      z-index: 9999;
    }
    .icon {
      width: 60px; /* –±—ã–ª–æ 80px */
      height: 60px;
      cursor: pointer; 
      transition: transform 0.2s ease;
      display: flex; 
      justify-content: center; 
      align-items: center;
      filter: brightness(0) invert(1);
    }
    .icon:hover {
      transform: scale(1.1); /* –±—ã–ª–æ 1.2 */
    }

    /* –ü–æ–ø–∞–ø—ã */
    #shop-popup,
    #levels-popup,
    #invite-popup,
    #tasks-popup,
    #dashboard-popup {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 20px; /* –±—ã–ª–æ 30px */
      border-radius: 15px;
      text-align: center;
      z-index: 20;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      opacity: 0;
      transition: transform 0.5s ease, opacity 0.5s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    #shop-popup.active,
    #levels-popup.active,
    #invite-popup.active,
    #tasks-popup.active,
    #dashboard-popup.active {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    /* –°—Ç–∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –ø–æ–ø–∞–ø–æ–≤ */
    #shop-popup ul,
    #levels-popup ul,
    #dashboard-popup ul {
      list-style: none;
      padding: 0; margin: 0;
      width: 100%; text-align: center;
    }
    #shop-popup li,
    #levels-popup li {
      margin: 10px 0; /* –±—ã–ª–æ 15px */
      text-align: center;
      font-size: 12px; /* –±—ã–ª–æ 14px */
      line-height: 1.4;
      cursor: pointer;
    }
    #level-description {
      margin-top: 15px; /* –±—ã–ª–æ 20px */
      text-align: center;
      font-size: 12px; /* –±—ã–ª–æ 16px */
      display: none;
      flex-direction: column;
      align-items: center;
    }
    #level-description img {
      width: 100px; 
      height: 100px; 
      margin-bottom: 10px;
    }
    #shop-popup button,
    #levels-popup button,
    #invite-popup button,
    #tasks-popup button,
    #dashboard-popup button {
      background: #1E90FF;
      border: none;
      color: white;
      padding: 10px; /* –±—ã–ª–æ 15px */
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px; /* –±—ã–ª–æ 16-18px */
      width: 90%;
      margin-top: 15px; /* –±—ã–ª–æ 20px */
      text-align: center;
      font-family: 'Press Start 2P', cursive;
    }
    #shop-popup button:disabled {
      background: gray; 
      cursor: not-allowed;
    }

    /* –í—Å–ø—ã—à–∫–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –º–æ–Ω–µ—Ç—É */
    #coin-highlight {
      position: absolute;
      width: 300px; /* –±—ã–ª–æ 400px */
      height: 300px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 5;
      display: none;
      background: radial-gradient(circle, rgba(255,255,224,0.8) 0%, rgba(255,215,0,0) 70%);
      animation: glow 0.6s ease-out;
    }
    @keyframes glow {
      from { transform: scale(0.8); opacity: 1; }
      to   { transform: scale(1.2); opacity: 0; }
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è Level Up */
    #level-up {
      position: fixed;
      top: 20%; left: 50%;
      transform: translateX(-50%) scale(0);
      padding: 15px 30px; /* –±—ã–ª–æ 20px 40px */
      background: rgba(0, 0, 0, 0.8);
      border: 4px solid;
      border-radius: 15px;
      font-size: 16px; /* –±—ã–ª–æ 20px –∏–ª–∏ 24px */
      font-family: 'Press Start 2P', cursive;
      color: #fff;
      z-index: 30;
      opacity: 0;
      transition: transform 0.5s ease, opacity 0.5s ease;
      pointer-events: none;
      text-align: center;
    }
    #level-up.show {
      transform: translateX(-50%) scale(1);
      opacity: 1;
    }

    /* –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ */
    #dashboard-popup table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px; /* –±—ã–ª–æ 20px */
      font-size: 12px;  /* –±—ã–ª–æ 14px */
    }
    #dashboard-popup th,
    #dashboard-popup td {
      padding: 8px; /* –±—ã–ª–æ 10px */
      border: 1px solid #fff;
    }
    #dashboard-popup th {
      background: #1E90FF;
    }
    .participants-info {
      color: lightyellow;
      font-size: 14px; /* –±—ã–ª–æ 16px */
      margin-bottom: 10px;
    }
    .crown {
      margin-left: 5px;
    }
    /* –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö —Ç—Ä—ë—Ö —Ä—è–¥–æ–≤ —Ç–∞–±–ª–∏—Ü—ã */
    #users-table-body tr:nth-child(1) {
      background: rgba(255, 215, 0, 0.2); 
      font-weight: bold;
    }
    #users-table-body tr:nth-child(2) {
      background: rgba(192, 192, 192, 0.2); 
      font-weight: bold;
    }
    #users-table-body tr:nth-child(3) {
      background: rgba(173, 216, 230, 0.2); 
      font-weight: bold;
    }

    /*************************************************************/
    /*       –ú–ï–î–ò–ê-–ó–ê–ü–†–û–°–´ –î–õ–Ø –û–ß–ï–ù–¨ –£–ó–ö–ò–• –≠–ö–†–ê–ù–û–í (<768px)       */
    /*************************************************************/
    @media only screen and (max-width: 768px) {
      /* –ï—â–µ —Å–∏–ª—å–Ω–µ–µ —É–º–µ–Ω—å—à–∏–º –∏–∫–æ–Ω–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å */
      .icon {
        width: 50px;
        height: 50px;
      }
      .progress-bar {
        height: 35px;
      }
      .progress-text {
        font-size: 10px;
      }
      #footer {
        bottom: 10px;
        gap: 20px;
      }
      /* –ú–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∏–ª–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Ö–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
      #progress-container {
        top: 5px;
      }
      #dashboard-popup th, #dashboard-popup td {
        padding: 6px;
        font-size: 10px;
      }
      /* –ü–æ–ø–∞–ø-–∫–Ω–æ–ø–∫–∏ */
      #shop-popup button,
      #levels-popup button,
      #invite-popup button,
      #tasks-popup button,
      #dashboard-popup button {
        padding: 8px;
        font-size: 12px;
      }
    }
  </style>
</head>

<body>
  <!-- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò -->
  <div id="loading-screen">
    <div class="loading-text"></div>
    <div id="telegram-username"></div>
  </div>

  <div id="background-overlay"></div>

  <div id="progress-container">
    <div class="progress-bar" id="progress-bar">
      <div class="progress" id="progress"></div>
      <div class="progress-text" id="progress-text">
        <span>ArcadiaCoin (ARCC): <span id="coins">0</span> / <span id="maxcoins">500</span></span>
        &nbsp;|&nbsp;
        <span>Level: <span id="current-level">1</span></span>
      </div>
    </div>
  </div>

  <canvas id="game-canvas"></canvas>

  <div id="coin-highlight"></div>

  <div id="footer">
    <img id="shop-button" class="icon" src="https://i.ibb.co/pyxwmBN/2025-01-13-182401.png" alt="Shop">
    <img id="invite-button" class="icon" src="https://i.ibb.co/ZHkthBy/2025-01-13-180941.png" alt="Invite Friend">
    <img id="tasks-button" class="icon" src="https://i.ibb.co/3TQyPkr/2025-01-13-182825-1.png" alt="Tasks">
    <img id="dashboard-button" class="icon" src="https://i.ibb.co/2SQVGTy/2025-01-13-183834.png" alt="Dashboard">
  </div>

  <!-- –ü–æ–ø–∞–ø—ã -->
  <div id="shop-popup">
    <h3>Upgrade Shop</h3>
    <ul id="shop-list"></ul>
    <button id="close-shop">Close</button>
  </div>

  <div id="levels-popup">
    <ul id="levels-list"></ul>
    <div id="level-description">
      <img id="level-image" src="" alt="Level Image">
      <p id="level-text"></p>
    </div>
    <button id="close-levels">Close</button>
  </div>

  <div id="invite-popup">
    <h3>Invite a Friend</h3>
    <p>If you invite a runner, you will receive 500 ARCC for each invited!</p>
    <button id="invite-action">Invite via Telegram</button>
    <button id="close-invite">Close</button>
  </div>

  <div id="tasks-popup">
    <h3>Tasks</h3>
    <p>Various tasks will be available here for rewards.</p>
    <ul id="tasks-list"></ul>
    <button id="close-tasks">Close</button>
  </div>

  <div id="dashboard-popup">
    <h3>Top Users Dashboard</h3>
    <div class="participants-info" id="participants-info">Total participants: 17,369</div>
    <table>
      <thead>
        <tr>
          <th>Rank</th>
          <th>Nickname</th>
          <th>ARCC Coins</th>
        </tr>
      </thead>
      <tbody id="users-table-body">
        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
      </tbody>
    </table>
    <button id="close-dashboard">Close</button>
  </div>

  <div id="level-up"></div>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <!-- Telegram WebApp –æ–±—ä–µ–∫—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ - –≤—ã–∑—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –≤ –±–æ—Ç–µ)
       –í —Ä–µ–∞–ª—å–Ω–æ–º –±–æ—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ window.Telegram —É–∂–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω -->
  <script>
    // –ï—Å–ª–∏ Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
    let tg = null;
    let userId = 'guest';
    let userName = 'Guest';
    if (typeof window.Telegram !== 'undefined' && window.Telegram.WebApp) {
      tg = window.Telegram.WebApp;
      tg.expand();
      tg.ready();
      if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
        userId = tg.initDataUnsafe.user.id;
        userName = tg.initDataUnsafe.user.username || tg.initDataUnsafe.user.first_name;
      }
    }
  </script>

  <script>
    let scene, camera, renderer, coin;
    let clickCount = 0;
    let level = 1;
    let nextLevelCoins = 500;
    let clickIncrement = 1;
    let users = [];

    // –£—Ä–æ–≤–Ω–∏, –∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Ü–≤–µ—Ç–∞, —Ñ–æ–Ω—ã, –æ–ø–∏—Å–∞–Ω–∏—è
    const levelRequirements = [
      { level: 1, coins: 500 },
      { level: 2, coins: 1000 },
      { level: 3, coins: 10000 },
      { level: 4, coins: 50000 },
      { level: 5, coins: 100000 },
      { level: 6, coins: 200000 },
      { level: 7, coins: 500000 },
      { level: 8, coins: 1000000 },
      { level: 9, coins: 10000000 },
      { level: 10, coins: 50000000 }
    ];
    const levelColors = [
      '#0088cc', '#6B5B95', '#88B04B', '#F7CAC9', '#92A8D1',
      '#955251', '#B565A7', '#009B77', '#DD4124', '#45B8AC'
    ];
    const levelBackgrounds = [
      'https://i.gifer.com/fzUl.gif',
      'https://i.gifer.com/EPts.gif',
      'https://i.gifer.com/ZLm5.gif',
      'https://i.gifer.com/23YN.gif',
      'https://i.gifer.com/WBVi.gif',
      'https://i.gifer.com/I5zb.gif',
      'https://i.gifer.com/2YcW.gif',
      'https://i.gifer.com/2swA.gif',
      'https://i.gifer.com/fyrV.gif',
      'https://i.gifer.com/Q81V.gif'
    ];
    const levelNames = [
      'Beginner', 'Apprentice', 'Advanced', 'Expert', 'Master',
      'Grandmaster', 'Legend', 'Immortal', 'Divine', 'Celestial'
    ];
    const levelDescriptions = [
      'Starting level, learning the basics.',
      'First steps on the path of mastery.',
      'Continuing to improve skills.',
      'Expert level achieved.',
      'Becoming a master of the craft.',
      'Mastering the art of clicking.',
      'You are a legendary clicker!',
      'Immortals reach the peaks!',
      'You are almost divine!',
      'Celestial level of clicking in the universe!'
    ];

    // –ù–æ–≤—ã–π –Ω–∞–±–æ—Ä –∞–ø–≥—Ä–µ–π–¥–æ–≤
    const upgrades = [
      { cost: 100,       increment: 2,  purchased: false },
      { cost: 1000,      increment: 3,  purchased: false },
      { cost: 5000,      increment: 4,  purchased: false },
      { cost: 15000,     increment: 5,  purchased: false },
      { cost: 100000,    increment: 10, purchased: false },
      { cost: 500000,    increment: 20, purchased: false },
      { cost: 1000000,   increment: 30, purchased: false },
    ];

    // –ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á
    const tasks = [
      { name: 'Click 100 times', reward: 150, completed: false },
      { name: 'Buy your first upgrade', reward: 300, completed: false },
      { name: 'Reach level 3', reward: 500, completed: false },
      { name: 'Click 1000 times', reward: 1000, completed: false },
      { name: 'Invite a friend', reward: 500, completed: false },
    ];

    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
    function init() {
      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∏–∫ –≤ —ç–∫—Ä–∞–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
      document.getElementById('telegram-username').textContent = userName !== 'Guest'
        ? `Hello, ${userName}`
        : 'Guest mode';

      // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑ localStorage
      loadGameState();

      scene = new THREE.Scene();
      // –ü–æ–¥–∞–ª—å—à–µ –∫–∞–º–µ—Ä—É, —á—Ç–æ–±—ã –º–æ–Ω–µ—Ç–∞ –±—ã–ª–∞ –º–µ–Ω—å—à–µ
      camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.z = 6; // –±—ã–ª–æ 5

      renderer = new THREE.WebGLRenderer({ alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);

      document.body.appendChild(renderer.domElement);

      // –ì–µ–æ–º–µ—Ç—Ä–∏—è –º–æ–Ω–µ—Ç—ã (—É–º–µ–Ω—å—à–∏–º —Ä–∞–¥–∏—É—Å)
      const coinGeometry = new THREE.CircleGeometry(1.2, 64); // –±—ã–ª–æ 1.5
      const coinMaterial = new THREE.MeshBasicMaterial({
        map: new THREE.TextureLoader().load('https://i.ibb.co/6ggc9pF/garold-1000-x-1000.png'),
        transparent: true
      });

      coin = new THREE.Mesh(coinGeometry, coinMaterial);
      coin.position.y = 1.0; // –ø–æ–¥–Ω–∏–º–∞–µ–º –º–æ–Ω–µ—Ç—É —á—É—Ç—å –≤—ã—à–µ
      scene.add(coin);

      // –°–æ–±—ã—Ç–∏–µ –∫–ª–∏–∫–∞ –ø–æ –∫–∞–Ω–≤–∞—Å—É
      renderer.domElement.addEventListener('pointerdown', onCoinClick);

      // –ö–Ω–æ–ø–∫–∏
      document.getElementById('shop-button').onclick = () => {
        document.getElementById('shop-popup').classList.add('active');
      };
      document.getElementById('close-shop').onclick = () => {
        document.getElementById('shop-popup').classList.remove('active');
      };

      document.getElementById('progress-container').onclick = () => {
        document.getElementById('levels-popup').classList.add('active');
      };
      document.getElementById('close-levels').onclick = () => {
        document.getElementById('levels-popup').classList.remove('active');
        document.getElementById('level-description').style.display = 'none';
      };

      document.getElementById('invite-button').onclick = () => {
        document.getElementById('invite-popup').classList.add('active');
      };
      document.getElementById('close-invite').onclick = () => {
        document.getElementById('invite-popup').classList.remove('active');
      };
      document.getElementById('invite-action').onclick = () => {
        // –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —á–µ—Ä–µ–∑ Telegram
        const shareText = encodeURIComponent("Join Arcadia AI Clicker!");
        const shareUrl = encodeURIComponent(window.location.href);
        const telegramUrl = `tg://msg?text=${shareText}%20${shareUrl}`;
        window.location.href = telegramUrl;
        setTimeout(() => {
          // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
          clickCount += 500;
          document.getElementById('coins').textContent = clickCount;
          document.getElementById('invite-popup').classList.remove('active');
          saveGameState();
        }, 1000);
      };

      document.getElementById('tasks-button').onclick = () => {
        document.getElementById('tasks-popup').classList.add('active');
      };
      document.getElementById('close-tasks').onclick = () => {
        document.getElementById('tasks-popup').classList.remove('active');
      };

      document.getElementById('dashboard-button').onclick = () => {
        document.getElementById('dashboard-popup').classList.add('active');
      };
      document.getElementById('close-dashboard').onclick = () => {
        document.getElementById('dashboard-popup').classList.remove('active');
      };

      // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–∞–≥–∞–∑–∏–Ω –∏ —Å–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π / –∑–∞–¥–∞–Ω–∏–π
      loadShopItems();
      loadLevelRequirements();
      loadTasks();

      // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ü–≤–µ—Ç –∏ —Ñ–æ–Ω –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
      updateLevelColor();

      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      generateUsersTable();
      startParticipantsUpdater();

      // –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–æ–±—ã—Ç–∏—é resize, —á—Ç–æ–±—ã –∫–∞–Ω–≤–∞—Å –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–ª—Å—è
      window.addEventListener('resize', onWindowResize);

      // –ê–Ω–∏–º–∞—Ü–∏—è
      animate();

      // –°–∫—Ä–æ–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
      setTimeout(() => {
        document.getElementById('loading-screen').classList.add('hidden');
      }, 800);
    }

    // –ü–æ–¥–≥–æ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞ –ø–æ–¥ –æ–∫–Ω–æ
    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    // –ó–ê–ì–†–£–ó–ö–ê –ò –°–û–•–†–ê–ù–ï–ù–ò–ï (—Å —É—á—ë—Ç–æ–º userId, –µ—Å–ª–∏ –µ—Å—Ç—å)
    function saveGameState() {
      const gameData = {
        clickCount,
        level,
        nextLevelCoins,
        clickIncrement,
        upgrades,
        tasks
      };
      localStorage.setItem('ArcadiaAI_' + userId, JSON.stringify(gameData));
    }
    function loadGameState() {
      const data = localStorage.getItem('ArcadiaAI_' + userId);
      if (data) {
        const gameData = JSON.parse(data);
        clickCount      = gameData.clickCount      || 0;
        level           = gameData.level           || 1;
        nextLevelCoins  = gameData.nextLevelCoins  || 500;
        clickIncrement  = gameData.clickIncrement  || 1;
        if (gameData.upgrades) {
          upgrades.forEach((upg, i) => {
            if (gameData.upgrades[i]) {
              upg.cost = gameData.upgrades[i].cost;
              upg.increment = gameData.upgrades[i].increment;
              upg.purchased = gameData.upgrades[i].purchased;
            }
          });
        }
        if (gameData.tasks) {
          tasks.forEach((task, i) => {
            if (gameData.tasks[i]) {
              task.name = gameData.tasks[i].name;
              task.reward = gameData.tasks[i].reward;
              task.completed = gameData.tasks[i].completed;
            }
          });
        }
      }
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
    function generateUsersTable() {
      const firstNames = [
        '–ò–≤–∞–Ω', '–ê–ª–µ–∫—Å–µ–π', '–ú–∞—Ä–∏—è', '–°–µ—Ä–≥–µ–π', '–û–ª—å–≥–∞',
        '–î–º–∏—Ç—Ä–∏–π', '–ù–∏–∫–∏—Ç–∞', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞', '–í–ª–∞–¥–∏–º–∏—Ä', '–ê–Ω–Ω–∞',
        'John', 'Alice', 'Bob', 'Charlie', '–ï–ª–µ–Ω–∞', '–ú–∞–∫—Å–∏–º',
        '–ê–Ω–∞—Å—Ç–∞—Å–∏—è', '–ö–∏—Ä–∏–ª–ª', '–ü–æ–ª–∏–Ω–∞', 'David', 'Emily',
        'Daniel', 'Sophia', 'James', 'Olivia', 'William',
        'Ava', 'Ethan', 'Isabella', 'Michael', 'Mia', 'Liam',
        'Charlotte', 'Noah', 'Harper', 'Aiden', 'Amelia',
        'Jackson', 'Evelyn', 'Matthew', 'Abigail', 'Benjamin',
        'Sofia', 'Jayden', 'Mia', 'Lucas', 'Ella', 'Henry',
        'Chloe', 'Ahmed', 'Mohamed', 'Ali', 'Omar', 'Youssef',
        'Khalid', 'Ibrahim', 'Hassan', 'Hussein', 'Karim', 'Saad'
      ];
      const lastNames = [
        '–ò–≤–∞–Ω–æ–≤', '–ü–µ—Ç—Ä–æ–≤', '–°–∏–¥–æ—Ä–æ–≤', '–ö–æ–∑–ª–æ–≤', '–ö—É–∑–Ω–µ—Ü–æ–≤',
        '–°–º–∏—Ä–Ω–æ–≤', '–í–∞—Å–∏–ª—å–µ–≤', '–°–æ–∫–æ–ª–æ–≤', '–ú–∏—Ö–∞–π–ª–æ–≤', '–§–µ–¥–æ—Ä–æ–≤',
        'Smith', 'Jones', 'Brown', 'Davis', 'Miller', 'Wilson',
        'Moore', 'Taylor', 'Anderson', 'Thomas', 'Jackson', 'White',
        'Harris', 'Martin', 'Thompson', 'Garcia', 'Martinez',
        'Robinson', 'Clark', 'Lewis', 'Ali', 'Khan', 'Ahmed',
        'Mohamed', 'Hassan', 'Hussein', 'Ibrahim', 'Khalid', 'Omar',
        'Youssef', 'Karim'
      ];

      // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–Ω–¥–æ–º–Ω–æ
      for (let i = 0; i < 100; i++) {
        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
        users.push({
          nickname: generateRandomNickname(firstName, lastName),
          coins: generateRandomCoins()
        });
      }

      // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –º–µ—Å—Ç–∞
      users[0].coins = 74369512;
      // –°–æ—Ä—Ç–∏—Ä—É–µ–º
      users.sort((a, b) => b.coins - a.coins);
      renderUsersTable();
    }

    // –†–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã
    function renderUsersTable() {
      const tbody = document.getElementById('users-table-body');
      tbody.innerHTML = '';
      const crowns = [' üëëü•á', ' üëëü•à', ' üëëü•â'];
      for (let i = 0; i < users.length; i++) {
        const tr = document.createElement('tr');

        const rankTd = document.createElement('td');
        rankTd.textContent = (i + 1) + (i < 3 ? crowns[i] : '');

        const nicknameTd = document.createElement('td');
        nicknameTd.textContent = users[i].nickname;

        const coinsTd = document.createElement('td');
        coinsTd.textContent = users[i].coins.toLocaleString();

        tr.appendChild(rankTd);
        tr.appendChild(nicknameTd);
        tr.appendChild(coinsTd);
        tbody.appendChild(tr);
      }
    }

    function generateRandomNickname(firstName, lastName) {
      const adjectives = ['Speedy', 'Mighty', 'Epic', 'Legendary', 'Crazy', 'Ninja', 'Heroic', 'Swift', 'Fierce'];
      const numbers = ['1','2','3','4','5','6','7','8','9'];
      const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
      const number = numbers[Math.floor(Math.random() * numbers.length)];
      return adj + firstName + number + lastName;
    }

    function generateRandomCoins() {
      return Math.floor(Math.random() * 10000000) + 1000;
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –ª–∏–¥–µ—Ä–æ–≤
    function startParticipantsUpdater() {
      let participants = parseInt(localStorage.getItem('participants')) || 17369;
      const infoElem = document.getElementById('participants-info');
      if (!infoElem) {
        const dashboard = document.getElementById('dashboard-popup');
        const p = document.createElement('div');
        p.className = 'participants-info';
        p.id = 'participants-info';
        p.textContent = 'Total participants: ' + participants.toLocaleString();
        dashboard.insertBefore(p, dashboard.querySelector('table'));
      }
      setInterval(() => {
        participants += Math.floor(Math.random() * 3) + 1;
        localStorage.setItem('participants', participants);
        document.getElementById('participants-info').textContent = 
          'Total participants: ' + participants.toLocaleString();
        
        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–æ–Ω–µ—Ç—ã —É –ø–µ—Ä–≤—ã—Ö 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        for (let i = 0; i < 3; i++) {
          users[i].coins += Math.floor(Math.random() * 50000);
        }
        users.sort((a, b) => b.coins - a.coins);
        renderUsersTable();
      }, 10000); // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    }

    // –ú–∞–≥–∞–∑–∏–Ω
    function loadShopItems() {
      const shopList = document.getElementById('shop-list');
      shopList.innerHTML = '';

      upgrades.forEach((upgrade) => {
        const listItem = document.createElement('li');
        const button = document.createElement('button');
        button.textContent = `+${upgrade.increment} ARCC (Cost: ${upgrade.cost} ARCC)`;

        // –ü–æ–∫—É–ø–∫–∞
        button.onclick = () => {
          if (clickCount >= upgrade.cost && !upgrade.purchased) {
            clickCount -= upgrade.cost;
            clickIncrement += upgrade.increment;
            upgrade.purchased = true;
            document.getElementById('coins').textContent = clickCount;
            button.disabled = true;
            saveGameState();
          }
        };

        if (upgrade.purchased) {
          button.disabled = true;
        }

        listItem.appendChild(button);
        shopList.appendChild(listItem);
      });
    }

    // –£—Ä–æ–≤–Ω–∏
    function loadLevelRequirements() {
      const levelsList = document.getElementById('levels-list');
      levelsList.innerHTML = '';
      levelRequirements.forEach((req, index) => {
        const listItem = document.createElement('li');
        listItem.style.color = levelColors[index] || '#FFFFFF';
        listItem.textContent = `Level ${req.level} (${levelNames[index]}) : ${req.coins} ARCC`;
        listItem.onclick = () => {
          const description = document.getElementById('level-description');
          const levelImg = document.getElementById('level-image');
          const levelTxt = document.getElementById('level-text');
          levelImg.src = levelBackgrounds[index] || '';
          levelTxt.textContent = levelDescriptions[index] || '';
          description.style.display = 'flex';
        };
        levelsList.appendChild(listItem);
      });
    }

    // –ó–∞–¥–∞—á–∏
    function loadTasks() {
      const tasksList = document.getElementById('tasks-list');
      tasksList.innerHTML = '';
      tasks.forEach((task, index) => {
        const li = document.createElement('li');
        li.style.marginBottom = '10px';
        li.style.fontSize = '12px';
        li.textContent = `${task.name} ‚Äî Reward: ${task.reward} ARCC`;
        li.onclick = () => {
          // –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
          if (task.completed) return;
          // –£—Å–ª–æ–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏–º, –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ª–∏ –∑–∞–¥–∞—á–∞
          if (checkTaskCompletion(task.name)) {
            // –ù–∞–≥—Ä–∞–¥–∞
            clickCount += task.reward;
            document.getElementById('coins').textContent = clickCount;
            task.completed = true;
            li.style.color = 'gray';
            li.style.textDecoration = 'line-through';
            saveGameState();
          } else {
            alert('You have not completed this task yet!');
          }
        };
        tasksList.appendChild(li);
      });
    }

    // –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π –∑–∞–¥–∞—á–∏
    function checkTaskCompletion(taskName) {
      switch (taskName) {
        case 'Click 100 times':
          return (clickCount >= 100);
        case 'Buy your first upgrade':
          return upgrades.some(u => u.purchased === true);
        case 'Reach level 3':
          return (level >= 3);
        case 'Click 1000 times':
          return (clickCount >= 1000);
        case 'Invite a friend':
          // –£—Å–ª–æ–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏–º, –µ—Å–ª–∏ +500 –º–æ–Ω–µ—Ç —É–∂–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ–º
          return (clickCount >= 500);
        default:
          return false;
      }
    }

    // –°–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –∏ —Å–º–µ–Ω–∞ —Ñ–æ–Ω–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è
    function updateLevelColor() {
      const color = levelColors[level - 1] || '#FFFFFF';
      const background = levelBackgrounds[level - 1] || '';
      document.getElementById('progress').style.background = color;
      document.getElementById('current-level').textContent = level;
      if (background) {
        const overlay = document.getElementById('background-overlay');
        overlay.style.backgroundImage = `url('${background}')`;
        overlay.style.opacity = 1;
        setTimeout(() => {
          document.body.style.background = `url('${background}') no-repeat center center fixed`;
          document.body.style.backgroundSize = 'cover';
          overlay.style.opacity = 0;
        }, 1000);
      }
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –º–æ–Ω–µ—Ç–µ
    function isClickOnCoin(event) {
      const rect = renderer.domElement.getBoundingClientRect();
      const x = event.clientX - rect.left - rect.width / 2;
      const y = event.clientY - rect.top - rect.height / 2;
      // —Ä–∞–¥–∏—É—Å –ø–æ–º–µ–Ω—å—à–µ –∏–∑-–∑–∞ —É–º–µ–Ω—å—à–µ–Ω–Ω–æ–π –º–æ–Ω–µ—Ç—ã
      const distance = Math.sqrt(x * x + y * y);
      return distance < 200; // –±—ã–ª–æ 250
    }

    // +x –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ
    function spawnPlusText(text) {
      const plusSpan = document.createElement('span');
      plusSpan.className = 'plus-text';
      plusSpan.textContent = `+${text}`;
      const { width, height } = renderer.domElement.getBoundingClientRect();
      plusSpan.style.left = `${width / 2 - 20 + (Math.random() * 40 - 20)}px`;
      plusSpan.style.top = `${height / 2 - 200 + (Math.random() * 30 - 15)}px`;

      document.body.appendChild(plusSpan);
      setTimeout(() => {
        if (plusSpan.parentNode) {
          plusSpan.parentNode.removeChild(plusSpan);
        }
      }, 1500);
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è "–ø—Ä–∏–∂–∞—Ç–∏—è" –º–æ–Ω–µ—Ç—ã
    function animateCoinScale(targetScale, duration) {
      const initialScale = coin.scale.x;
      const scaleDifference = targetScale - initialScale;
      const startTime = performance.now();

      function anim() {
        const elapsed = performance.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const newScale = initialScale + scaleDifference * progress;
        coin.scale.set(newScale, newScale, newScale);
        if (progress < 1) requestAnimationFrame(anim);
      }
      anim();
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è "Level Up!"
    function showLevelUpAnimation(newLevel) {
      const levelUpPopup = document.getElementById('level-up');
      levelUpPopup.style.borderColor = levelColors[newLevel - 1] || '#fff';
      levelUpPopup.textContent = `Congratulations! Level ${newLevel}`;
      levelUpPopup.classList.add('show');
      setTimeout(() => {
        levelUpPopup.classList.remove('show');
      }, 3000);
    }

    // –ö–ª–∏–∫ –ø–æ –º–æ–Ω–µ—Ç–µ
    function onCoinClick(event) {
      if (!isClickOnCoin(event)) return;

      // –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ
      renderer.domElement.style.filter = 'brightness(2)';
      setTimeout(() => {
        renderer.domElement.style.filter = 'brightness(1)';
      }, 200);

      // –≠—Ñ—Ñ–µ–∫—Ç –±–ª–∏–∫–∞
      const highlight = document.getElementById('coin-highlight');
      const rect = renderer.domElement.getBoundingClientRect();
      highlight.style.left = `${event.clientX - rect.left - 150}px`; // –±—ã–ª–æ 200
      highlight.style.top = `${event.clientY - rect.top - 150}px`;
      highlight.style.display = 'block';
      setTimeout(() => {
        highlight.style.display = 'none';
      }, 600);

      // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏–∂–∞—Ç–∏—è
      animateCoinScale(1.2, 50);  // –±—ã–ª–æ 1.3
      setTimeout(() => animateCoinScale(1.0, 50), 50);
      setTimeout(() => animateCoinScale(0.9, 50), 100);

      // –ü–ª—é—Å —Ç–µ–∫—Å—Ç
      spawnPlusText(clickIncrement);

      // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–Ω–µ—Ç—ã
      clickCount += clickIncrement;
      document.getElementById('coins').textContent = clickCount;
      document.getElementById('maxcoins').textContent = nextLevelCoins;
      updateProgress();

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º
      saveGameState();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    function updateProgress() {
      const progressPercent = (clickCount / nextLevelCoins) * 100;
      document.getElementById('progress').style.width = `${progressPercent}%`;

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
      if (clickCount >= nextLevelCoins) {
        level++;
        showLevelUpAnimation(level);
        const nextLevel = levelRequirements.find(req => req.level === level);
        nextLevelCoins = nextLevel ? nextLevel.coins : nextLevelCoins * 2;
        document.getElementById('maxcoins').textContent = nextLevelCoins;
        updateLevelColor();

        // –ü—Ä–æ–≤–µ—Ä–∏–º –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, reach level 3 –∏ —Ç.–¥.)
        loadTasks();
      }
    }

    // –û—Å–Ω–æ–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è Three.js
    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }

    // –ó–∞–ø—É—Å–∫
    init();
  </script>
</body>
</html>
